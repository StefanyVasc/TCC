\section{Desenvolvimento realizado na empresa}
\label{sec:desenvolvimento}

{Nesta sessão será apresentada a ferramenta desenvolvida como solução ao problema de acessibilidade em  \textit{e-commerce} da organização, abordando as técnicas e tecnologias utilizadas e contribuições para a empresa.}

\subsection{A problemática e a solução proposta}

{A problemática tratava-se de transformar um \textit{e-commerce} legado sem práticas de acessibilidade em um \textit{e-commerce} acessível e bem construído focando em dar suporte e eliminar barreiras de acesso que as pessoas com deficiências visuais apresentam ao acessar um sistema como esse. Como requisitos principais para a solução ser aceita tínhamos que construir ou adaptar os componentes incluindo práticas de acessibilidade, dar suporte a diversos tipos de navegações que o usuário pudesse escolher, construir uma painel administrativo onde apresentasse um \textit{dashboard} com gráficos acessíveis para o acompanhamento das vendas.

Para tratar essa problemática foi necessário dividi-la em pequenas fases e trabalhar isoladamente em cada uma delas, visto que essas fases dependiam uma da outra e elas foram desenvolvidas de forma cronológica partindo de pesquisas à testes. 

No total foram preciso quatro fases, sendo a primeira fase voltada para o entendimento do problema e do uso das novas tecnologias como também entender as limitações do projeto. A segunda fase estava voltada na construção e adaptação da interface do usuário seguindo tudo o que foi levantado na fase de entendimento do problema. A terceira fase teve foco na construção do painel administrativo e no \textit{dashboard}, além do planejamento de componentes e na construção de gráficos acessíveis. Por fim a quarta fase, onde se concentrou os testes, foram construídas abordagens de testes para a certificação de que todos os requisitos estavam sendo satisfeitos e se as diretrizes estavam sendo seguidas.

}

\subsection{Fase 1: Pesquisa e entendimento}
{A construção do \textit{e-commerce} ocorreu em 4 fases, sendo a primeira fase voltada para o entendimento do problema e do uso das novas tecnologias como também entender as limitações do projeto em questão de performance e se seria possível ou não adicionar novas bibliotecas caso fosse necessário. Ainda na primeira fase, após concluída a fase de estudo e exploração o time optou por construir um guia de acessibilidade que seria usado na fase de desenvolvimento do projeto, essa decisão se deu porque a documentação das diretrizes de acessibilidade é bastante extensa e engloba muitos tipos de deficiência, sendo assim tornando-se de difícil entendimento para todos que estão lendo. Para complementar o guia de acessibilidade foi construído um \textit{style guide} para guiar todos os desenvolvedores a respeito de aspectos importantes que devem estar presentes na \textit{User Interface (UI)}}

\subsubsection{Guia de acessibilidade}
{Quando falamos em acessibilidade precisamos citar o WCAG \cite{WCAG} ou \textit{Web Content Accessibility Guidelines} é um conjunto de diretrizes que estipula os padrões de acessibilidade digital que devem ser seguidos pelos sites. Essas recomendações foram todas desenvolvidas pelo W3C \cite{W3C}, o consórcio \textit{World Wide Web}.

O WCAG é responsável por orientar de forma muito simples como identificar e implementar técnicas que eliminam barreiras de acesso para pessoas com deficiência e ele foi construído sob quatro princípios:
\begin{itemize}
\item Perceptível: As informações e os componentes da interface do usuário devem ser apresentados de formas que possam ser percebidas pelo usuário.
\item Operável: Os componentes da interface de usuário e a navegação devem ser operáveis. O usuário não pode ter impedimentos para utilizar a interface.
\item Compreensível: A informação e a operação da interface de usuário devem ser compreensíveis. 
\item Robusto: O conteúdo deve ser robusto o suficiente para poder ser interpretado de forma confiável por uma ampla variedade de agentes de usuário, incluindo tecnologias assistivas. a aplicação deve ser bem construída, de forma a ser acessível para uma gama maior de navegadores e tecnologias assistiva
\end{itemize}

Guiado por esses quatro princípios surgiram as diretrizes, que são os itens que fornecem os objetivos básicos que devem ser atingidos dentro de cada principio, que são tópicos menores e mais específicos. Dentro das diretrizes existe critérios de sucesso, esse sucesso está atrelado a nível de conformidade. Então quanto mais conforme o \textit{e-commerce} está adequado à aquela diretriz maior é o critério de sucesso. Os critérios são definidos três níveis de conformidade:
\begin{itemize}
\item No nível A \ref{Diretrizes nível A} estão os critérios mais simples, que representam apenas barreiras mais significativas de acessibilidade. Ao obter sucesso nesse critério já é possível eliminar uma boa quantidade de barreiras de acesso. 
\item No nível AA \ref{Diretrizes nível AA}, é um nível acima do A, o que significa que atingindo esse nível as barreiras do nível A foram somadas a mais barreiras e todas foram eliminadas.
\item Nível AAA \ref{Diretrizes nível AAA}, geralmente são um refinamento das anteriores, sendo mais detalhadas e que trazem um nível mais sofisticado de acessibilidade.
\end{itemize}

Dentre todas as diretrizes WCAG \cite{WCAG} que existem foram escolhidas algumas que fizessem sentido no contexto de diminuição de barreiras de acesso para deficientes visuais. Toda a construção do \textit{e-commerce} foi baseada nas diretrizes listadas no Apêndice \ref{sec:apendice}: 
\
}

\newpage
\subsubsection{Style Guide}
{O \textit{style guide} \cite{STYLE} é um documento que concentra as diretrizes de design de um projeto para ajudar e alinhar todos os desenvolvedores. Com o \textit{style guide} é possível manter a consistência visual dentro do projeto. Para a construção do \textit{style guide} do \textit{e-commerce} mantivemos o foco em três informações básicas:
\begin{itemize}
\item Cores
\item Tipografia
\item Elementos de UI
\end{itemize}

\vspace*{20px}
Cores:  Quando falamos em cores temos que ter em mente duas coisas: contraste e luminosidade. Existe algumas deficiências e limitações visuais que fazem com que a cor sofra mudanças então é preciso que o \textit{e-commerce} tenha uma paleta de cores acessível que garanta o contraste ideal entre as cores \ref{Diretrizes nível AA}. 
\begin{figure}[ht]
  		\centering
        \includegraphics[width=1.0\textwidth]{images/paleta_de_cores_acessiveis.png}
        \caption{Exemplo de uma paleta de cores acessível feita no \textit{Adobe Color}}
\end{figure}  
 
\vspace*{50px}
É de extrema importância verificar como ficaria essas cores pela visão de pessoas que possuem algum tipo de daltonismo. Ao perceber que a paleta de cores ainda está com um contraste aceitável e de no mínimo 7:1 ela está pronta para o uso, seguindo a diretriz nível AAA de contraste \ref{Diretrizes nível AAA}. 
 \begin{figure}[ht]
        \centering
    	\includegraphics[width=1.0\textwidth]{images/paleta_daltonismo.png}
        \caption{simulação de daltonismo feita no \textit{Adobe Color}}
\end{figure}  


\newpage
Tipografia: A tipografia não é apenas escolher uma fonte legal para o seu projeto, junto com ela devemos levar em consideração vários aspectos que são importantes e foram listados nas diretrizes: 
\begin{itemize}
\item Espaçamento
\begin{itemize}
\item O espaçamento deve ser bem planejado para que seja possível aplicar um zoom de 200\%\ e ou ainda em caso de redimensionamento de tela o texto deve permanecer legível. 
\end{itemize}
\item Altura de linhas
\begin{itemize}
\item Sempre que houver um redimensionamento os textos não devem perder legibilidade.
\end{itemize}
\item Hierarquia tipográfica
\begin{itemize}
\item Sempre que o conteúdo da tela for dividido em sessões, todas devem possuir títulos claros, com níveis de hierarquia bem definidos, para assim manter a hierarquia da informação de uma forma concisa. 
\end{itemize}
\item Pesos, cores e contraste. 
\begin{itemize}
\item O contraste entre textos e telas também deve ser mantido num padrão de no mínimo 4:5:1
\end{itemize}
\end{itemize}

\begin{figure}[ht]
        \centering
    	\includegraphics[width=1.0\textwidth]{images/contrast_check.png}
        \caption{Checagem do contraste de textos e fundo no \textit{Adobe Color}}
\end{figure} 

\newpage
Elementos de UI: Este tópico compreende os elementos que estarão presentes na UI, logo serão apresentados exemplos e listagem desses componentes. Na construção desses elementos é feito o detalhamento visual, ou seja, os tamanhos, espaços, margens, cores que ele deve possuir como também os seus estados comportamentais, se houver um erro como ele se comporta, em caso de elemento focado como deve ficar o elemento.

\begin{wrapfigure}{l}{0.5\textwidth}
        \begin{center}
    	\includegraphics[width=0.48\textwidth]{images/ui-exemplo.png}
        
        \end{center}
        \caption{Exemplo de um componente montado com elementos de UI}
\end{wrapfigure} 

Com o componente \textit{Card} do exemplo ao lado podemos analisar onde as diretrizes foram aplicadas e como elas impactam na construção de componentes mais complexos de UI. 
\begin{itemize}
\item O elemento sinalizado como 1 está recebendo foco (diretriz 3.2.1 e 2.4.7), a arquitetura desse elemento está fazendo sentido para todos, sejam ouvintes ou leitores (diretriz 1.3.1). A apresentação das informações segue uma sequencia lógica (diretriz 1.3.2).  
\item O número 2 refere-se a imagem onde ela deve ter uma descrição alternativa em texto (diretriz 1.1.1) e possuir um contraste não textual (diretriz 1.4.11).
\item O terceiro item compreende o cabeçalho do Card. No cabeçalho deverá conter um contraste textual mínimo (diretriz 1.4.3) e ser claro o suficiente para a finalidade do conteúdo (diretriz 2.4.6).
\item O quarto item compreende a informações adicionais, sejam elas quantos itens restam disponíveis para compra ou a avaliação daquele item. Para essas informações adicionais além de estarem descritas de forma não "convencional" aos padrões usuais de \textit{e-commerce} foram aplicadas as diretrizes de contraste textual (diretriz 1.4.11), contraste melhorado (diretriz 1.4.6), etc.
\end{itemize}
\newpage
\begin{itemize}
\item O quinto item é a descrição do produto, essa descrição não está exposta em sua totalidade, para ler o texto completo é necessário apertar o botão para ler mais. Além de todas as diretrizes de contraste que foram aplicadas, está sendo usado as diretrizes de foco (diretrizes 2.4.7 e 3.2.1), o botão presente segue a diretriz de tamanho de área clicável (diretriz 2.5.5), além de ter o nome acessível (diretriz 2.5.3). No botão em questão ainda há o acionamento e foco por teclado (diretrizes 1.4.12, 1.4.13, 2.1.1, 2.1.2 e 2.1.3). 
\item O botão sinalizado pelo número 6 segue as mesmas diretrizes do botão listado no item 5. Além das diretrizes relacionadas a foco (diretriz 2.4.3, 2.4.7), navegação (diretriz 3.2.3, 1.4.12, 1.4.13, 2.1.1, 2.1.2 e 2.1.3), localização (diretriz 2.4.8, 3.2.4) e acionamento (diretriz 2.5.2).
\item O item 7 refere-se a informações sobre preços, onde há um contraste muito nítido para evidenciar a informação mais importante, que no caso é o valor. Nesse item contempla todas as diretrizes de contraste. 
\item O item 8 é uma abordagem diferenciada para informações que são úteis em contextos gerais. Nesse caso é muito atrativo para usuários ouvintes saberem sempre quanto pontos eles dispõem em sua conta, então essa informação está disposta mais facilmente. 
\end{itemize}

}

\subsection{Fase 2: Adaptação e construção da UI acessível e usável usando o guia de acessibilidade e \textit{style guide}}
{A segunda fase se concentrou na adaptação da UI e na construção de novos componentes para o \textit{e-commerce}, sempre seguindo os guias. Nessa fase o foco principal se dividiu em duas vertentes:
\begin{itemize}
\item Criar abordagens inteligentes para problemas de acessibilidade em imagens, formulários e navegação e a adaptação de componentes com \textit{HTML} \cite{HTML} não semântico para semântico.
\item  Adaptar e criar componentes para que as tecnologias assistivas pudessem entendê-los corretamente e assim ter uma a navegação por teclado eficaz.

\end{itemize}
}
\subsubsection{Abordagens inteligentes e adaptação de componentes}
{\begin{itemize}
    \item O primeiro passo a se fazer foi organizar o \textit{HTML} \cite{HTML} de forma logica e semântica, onde cada tag deve ser usada para o fim que ela foi criada seguindo uma ordem que seja compreensível além de corresponder ao conteúdo desejado. Nesse ponto em um sistema legado muitos componentes estavam escritos de maneira errada, algumas tags \textit{HTML} \cite{HTML} estavam sendo usadas com um proposito diferente do que ela foi criada e para esses casos utilizamos a abordagem \textit{WAI-ARIA} \cite{WAI-ARIA} para que o leitor conseguisse entender o que era cada tag daquela e também fosse possível fazer a navegação via teclado.

\newpage

{\textbf{Caso de uso 1:} Adaptação de um botão que foi construído de forma não acessível e por isso não era lido por leitores de tela e nem navegável via teclado. Nesse exemplo, foi usado o atributo role do \textit{WAI-ARIA}\cite{WAI-ARIA} para dar o comportamento de botão a essa \lstinline{div} e com isso ganhar todos os atributos que um botão teria.

\begin{lstlisting}[language=html, caption=Componente de botão antes de receber boas praticas e acessibilidade]
    <div
        className="button__add"
        onClick={event => onClick(event)}
    >
      Adicionar ao carrinho 
    </div>
\end{lstlisting}}
{\begin{lstlisting}[language=html,caption=Adaptação do componente de botão usando \textit{WAI-ARIA}]
<div 
    role="button" 
    tabIndex="0" 
    className="button__add"
    onClick={event => onClick(event)}
    onKeyDown={event => keyHandler(event, props.onClick)}
    {...props}
>
    Adicionar ao carrinho
</div>
 
\end{lstlisting}}

\vspace*{50px}
{\textbf{Caso de uso 2:} Adaptação e construção de imagens acessíveis. 
\item As imagens que possuem algum tipo de conteúdo devem ser acessíveis, elas precisam de alguma descrição, seja ela visível ou não. Existe o atributo \lstinline{alt} para a \textit{tag} \lstinline{img}, onde ele serve para descrever o que está presente na imagem. Essa descrição do \lstinline{alt} não aparece visualmente, mas ela é lida pelo leitor de tela, quando o usuário, navegando pelo teclado, passar pela imagem.}
{\begin{lstlisting}[language=html,caption=usando atributo alt]
<img src="headphone.jpg" alt="Headphone na cor preto"> 
\end{lstlisting}}
\item Caso haja necessidade de fornecer uma informação contextualizada é necessário fazer uso do atributo \lstinline{title}. Nesse caso, a maioria dos leitores de tela lerá o texto alternativo, o atributo de título e o nome do arquivo. Além disso, os navegadores exibem o texto do título como dicas de ferramentas quando estão sobre o mouse. Com a chegada do \textit{HTML 5} \cite{HTML} surgiram dois novos elementos o \lstinline{<figure>} e \lstinline{figcaption>}, que devem associar uma figura a uma legenda. 
{\begin{lstlisting}[language=html,caption=usando atributo alt]
<figure>
  <img src="headphone.jpg" alt="Headphone na cor preto"> 
  <figcaption>Headphone com microfone acoplado na cor preta, com um fio de ótima construção</figcaption>
</figure>
\end{lstlisting}}

\item  Ainda temos os casos onde as imagens são apenas decorativas e como elas não carregam conteúdo elas devem ser ignoradas pelos recursos de tecnologia assistivas. Para esse caso nós temos três tipos de abordagens: 
\begin{itemize}
\item Por ser decorativa a melhor abordagem é incluí-las na página como imagens de fundo através de \textit{CSS} \cite{CSS} E caso a imagem transmita significado ao conteúdo, mas tenha sido inserida via \textit{CSS} \cite{CSS}, pode-se utilizar recursos \textit{WAI-ARIA}\cite{WAI-ARIA}.
{\begin{lstlisting}[language=html,caption=adicionando imagem via CSS]
<style>
div {
    background-image:url("./images/headphone-preto.png");
}
</style>
\end{lstlisting}}
\item Em casos de imagens que usam a \textit{tag} \lstinline{img} basta ter uma descrição \lstinline{alt} vazia. Isso é para fazer com que os leitores de tela reconheçam a imagem, mas não tentem descrever a imagem. A razão para usar um \lstinline{alt} vazio ao invés de não incluí-lo é porque muitos leitores de tela anunciam o URL da imagem inteira se nenhum \lstinline{alt} for fornecido.
{\begin{lstlisting}[language=html,caption=usando atributo alt vazio]
<img src="logotipo.jpg" alt=""> 
\end{lstlisting}}

\item Em casos de imagens incluídas em tags que não são \lstinline{img} podemos fazer uso o atributo \textit{ARIA role} \lstinline{(role="presentation")}, isso também impede que os leitores de telas leiam textos alternativos.
{\begin{lstlisting}[language=html,caption=usando atributo rele="presentation"]
<div role="presentation" src="logotipo.jpg" alt="" />
\end{lstlisting}}
\end{itemize}


 
\end{itemize}}

{
\textbf{Caso de uso 3:} Criando formulários acessíveis.

\begin{itemize}
    \item O primeiro passo para criar um formulário acessível é criar uma estrutura \textit{HTML} \cite{HTML} com sequência lógica, essa sequencia é definida pela ordem que se encontra o \textit{HTML}. Fazendo isso a navegação pelos campos do formulário ficará mais fácil tanto por teclado quanto para leitores de tela. 
    \item A associação de um campo de entrada a um rótulo fará diferença para o usuário final. E quando não for possível fazer essa associação por tags \textit{HTML} existe outras opções como a forma \textit{WAI-ARIA} \cite{WAI-ARIA} usando o atributo \lstinline{aria-label}.
    \item É necessário o fornecimento de instruções claras sobre os dados de entradas pedidos no campo. As entradas devem ser facilitadas, retire caracteres especiais em campos numéricos e etc. 
    \begin{itemize}
        \item Para campos com obrigatoriedade de dados, deve-se ter um indicador visual e escrito de obrigatoriedade. O atributo \lstinline{required} auxilia no quesito de obrigatoriedade de um campo.
        \item Podemos adicionar também o atributo de estado \lstinline{aria-invalid} que pode ter os valores \textit{true} ou \textit{false} para indicar se o campo está válido ou inválido.
    \end{itemize}
    \item A identificação e descrição de erros de entrada e confirmação de envio de informações devem ser claras para o usuário. 
    \begin{itemize}
        \item A indicação do erro é feita de três formas: com uma cor, um texto informativo e um ícone de alerta. Assim, não usamos somente uma forma para representar esta informação, beneficiando pessoas sem deficiência visual, com deficiências cognitivas, que usam leitor de telas ou que possuem daltonismo;
        \item Uma área para mensagem informativa em um formulário sempre será bem-vinda. Esta área de mensagem informativa do formulário possui os atributos \lstinline{role="alert"}, que avisa que é uma mensagem de alerta e \lstinline{aria-live="assertive"} que informa que é um campo que pode sofrer modificações no conteúdo e o leitor de telas é informado quando há modificação neste campo;
    \end{itemize}
    \item É necessário haver distinção visual de qual campo está recebendo o foco no momento, mesmo aplicando o \lstinline{outline} padrão do navegador. A customização desse \lstinline{outline} pode ser feita para que ele sempre fique visível qual campo contém o foco.
    
    {\begin{lstlisting}[language=html, caption=Formulário acessível]
    <form>
        <output id="formMessage" role="alert" aria-live="assertive" tabindex="0" class="error">
            O formulário apresenta erros que impedem a finalização do seu cadastro. Confira se todos os campos obrigatórios foram preenchidos e tente novamente.
        </output>

        <p>
            <label for="email1">
                E-mail <span class="required">(obrigatório)</span>:
            </label>
            <input type="email1" name="email1" id="email1" required="" aria-invalid="true" aria-describedby="emailMessage">
            <span class="fieldMessage" id="emailMessage">
                O e-mail não pode ficar em branco e deve ser válido.
            </span>
          </p>
  
          <p>
            <label for="phone1">
                Telefone <span class="optional">(opcional)</span>:
            </label>
            <input type="tel" name="phone1" id="phone1" aria-describedby="phoneTip">
            <span class="fieldTip" id="phoneTip">
                Formato: (99) 99999-9999.
            </span>
          </p>

        <button class="formButton" id="formButtonARIA" type="submit">Finalizar cadastro</button>
    </form>
    \end{lstlisting}}
    
    \begin{figure}[ht]
  		\center
        \includegraphics[width=0.7\textwidth]{images/form-acessivel.png}
        \caption{Formulário criado usando as técnicas listadas acima}
    \end{figure} 
\end{itemize}
}
\subsubsection{Adaptação de componentes para o uso de leitores de telas e navegação por teclado}
{Antes de falar de adaptação de componentes é necessário entender como funciona o leitor de telas. O leitor de telas basicamente é um software que vai percorrendo textos e imagens e lendo em voz alta tudo o que ele encontra na tela, a partir do momento que o usuário começa a interagir com o software para efetuar uma navegação ele vai percorrendo o documento saltando entre elementos interativos e cabeçalhos.Para que essa navegação ocorra deve está tudo funcionando direito, pois caso contrário o usuário pode se perder na página e ter dificuldades em entender como a informação está organizada. No leitor de telas a navegação ocorre de três maneiras: 
\begin{itemize}
    \item Navegação com as setas direcionais: Usando a navegação por setas direcionais o usuário consegue acessar as informações textuais.
    \item Navegação por tecla \textit{tab}: O leitor sai pulando para os links espalhados na página.
    \item Navegação com a tecla h: O leitor salta entre os cabeçalhos marcados na página.
\end{itemize}

\newpage

{\textbf{Caso de uso 1:} Navegação por cabeçalhos.

Cabeçalhos compõem a hierarquia de informação do site, essa hierarquia é usada pelos leitores de tela para navegação dentro da página. A grande maioria dos leitores de tela dispõem de atalhos para acesso rápido aos cabeçalhos marcados na página. Para garantir que tecnologias assistivas acessem o conteúdo dos cabeçalho sem sua ordem de importância é preciso tomar alguns cuidados: 
\begin{itemize}
    \item Cuidado com múltiplas \textit{tags} \lstinline{h1} na página. Mesmo que haja separação de contexto para a utilização de mais de um \lstinline{h1} por página o leitor de tela não consegue identificar a diferença e a importância de \lstinline{h1} contidos em outras \textit{tags}.
    \item Para essa navegação funcionar, o código precisa ter sido escrito com a semântica correta, ou seja, cabeçalhos devem ser definidos como cabeçalhos e não usar qualquer outro artificio visual para se assemelhar a um cabeçalho. 
\end{itemize}
{\begin{lstlisting}[language=html,caption=cabeçalhos com hierarquia]
<h1>Cabeçalho Principal</h1>
<p>Exemplo de um texto de um parágrafo</p>
<h2>Cabeçalho Secundário</h2>
<p>Mais texto de um parágrafo.</p>
\end{lstlisting}}


{\textbf{Caso de uso 2:} Navegação por tabulação e leitores de tela.

A ordem da navegação por tabulação é derivada da forma como o \textit{layout} do \textit{site} está escrito, contudo a ordem padrão pode não corresponder necessariamente a ordem visual. Ao utilizar a tecla \textit{tab}, o leitor de tela realiza o foco e lê em voz alta os links e componentes interativos presentes na página.  A tabulação é utilizada somente para navegar entre os links, e com isso todos os links terão que ser localizados através destas duas formas, com a tabulação ou com as setas. O que diferencia uma forma da outra, é que com as setas, o usuário poderá ler toda a página (incluindo texto entre os links), e com a tabulação, o usuário só pode localizar os links, botões, campos de edição, e caixas de seleção.


Navegar por entre os links é uma forma de observar o texto rapidamente, especialmente se os usuários estiverem tentando encontrar uma seção específica do \textit{website}. Para ter uma navegação por tabulação eficiente é preciso passar por alguns pontos: 
\begin{enumerate}
    \item Ordene de forma lógica e intuitiva a leitura e tabulação. Preparar o \textit{HTML}\cite{HTML} para ter uma navegação consistente e eficaz é essencial para o bom funcionamento da navegação atrelada a leitores de tela. 
    \item Usar a tecla \textit{tab} para passar pelos links e controles de formulários
    das páginas, certificando-se de que todos os links e controles de
    formulários podem ser acessados, bem como se os links indicam
    claramente para onde levam. 
    \begin{itemize}
        \item Com atributo \lstinline{tabindex} é possível definir uma ordem de foco nos elementos dispostos na tela. Usando o \lstinline{tabindex=0} é inserido um elemento na ordem natural de tabulação e com \lstinline{tabindex="-1"} um elemento é removido da ordem e tabulação.
        \newpage
{\begin{lstlisting}[language=html,caption=Uso do atributo tabindex]
<label>
    Primeiro na lista de tabulação:<input type="text">
</label>
<div tabindex="0">
Próximo item na lista de tabulação, mesmo não sendo um elemento que receberia o foco natural
</div>
<div>Não será focado pois está sem o tabindex</div>
\end{lstlisting}}
        \item Adicione o atributo \lstinline{title} aos links, ele mostrará uma descrição do lugar pra onde o link leva, melhorando a navegação.
{\begin{lstlisting}[language=html,caption=usando o atributo title]
<a href="#" onclick="abrePopup()" onkeypress="abrePopup()" title="Abre uma janela pop-up com Javascript">Ver mais informações</a>
\end{lstlisting}}
    \end{itemize}
    \item Forneça âncoras para ir direto a um bloco de conteúdo. São comumente chamados de \textit{landmarks} é um tipo de região em uma página web a qual uma pessoa pode querer acessá-la rapidamente. Um dos principais benefícios em se usar pontos de referência é a possibilidade de o usuário acessar diretamente uma região da página sem a necessidade de seguir a ordem natural do conteúdo. Isso é especialmente relevante para o caso de pessoas que utilizam leitores de tela para navegar na \textit{Web}. Para essa abordagem é muito utilizado o CSS \cite{CSS} deixando-os links invisíveis e apenas disponíveis quando a navegação por tabulação se iniciar. 
{\begin{lstlisting}[language=html,caption=usando landmarks]
<div role="heading" id="cabecalho"> 
  <h1>O Cabeçalho</h1> 
  <a href="#conteudo" accesskey="p">Pular para o conteúdo principals</a> 
</div> 
<div role="navigation" id="navegacao"> conteúdo da navegação </div>
<div role="main" id="conteudo"> conteúdo da main </mdiv>
\end{lstlisting}}
    \item Não utilize tabelas para diagramação. As tabelas devem ser utilizadas apenas para dados tabulares e não para efeitos de disposição dos elementos na página. O leitor de telas sairá pulando por cada campo das tabelas e o usuário poderá ficar perdido na navegação. Para efeitos de diagramação faça uso de \textit{CSS} \cite{CSS}.
    \item Separe os links adjacentes. Em uma sequência de links, além do espaço, é importante o uso de separadores ou elementos do HTML \cite{HTML} adequados para que as pessoas com deficiência identifiquem claramente onde termina e começa um novo link. É recomendado o uso de listas , em que cada elemento dentro da lista é um link.
{\begin{lstlisting}[language=html,caption=separando links adjacentes]
<ul id="menu">
    <li> <a href="home.html">Home</a></li>
    <li> <a href="pesquisa.html">Pesquisa</a></li>
</ul>
\end{lstlisting}}
    \item Não abrir novas instâncias sem a solicitação do usuário. Não use o redirecionamento automático de páginas. Forçar a abertura de links em uma nova janela não é algo esperado e o usuário se perderá na navegação. Caso implemente essa funcionalidade, o link deve possuir uma iconografia óbvia e explicativa, usando pseudo-elemento \lstinline{::after} no CSS \cite{CSS}. No CSS o conteúdo de pseudo-elementos é lido em voz alta por leitores de tela, portanto é de extrema importância de que o conteúdo seja com informações relevantes.
    \item Garanta que o conteúdo possua o foco por mouse ou teclado. Esse foco deve ser visível. Para pessoas com baixa visão, é muito importante que seja possível perceber facilmente onde está o foco do teclado, garantindo uma maior facilidade de navegação. A pseudo-classe \lstinline{:focus} é utilizada para definir o estilo de qualquer elemento HTML \cite{HTML} que receber o foco do teclado, como links e elementos de formulário.
{\begin{lstlisting}[language=html,caption=usando o foco visível]
a:focus, a:hover {
    border: 2px solid #F00;
}
\end{lstlisting}}
    \item Garanta que todas as funcionalidades que estão disponíveis via mouse também estarão disponíveis para serem acionadas via teclado. Só dessa forma o site estará totalmente acessível para pessoas com deficiências. 
\end{enumerate}
}
}
}

\newpage
\subsection{Fase 3: Construção do dashboard acessível}
{Para a construção do \textit{dashboad} com gráficos foi utilizado a biblioteca D3.js \cite{D3} que é usada para visualização de informação. Essa biblioteca permite que seja construído aplicações em que os dados entram puros e são dinamicamente associados em representações gráficas. Com o D3 o DOM \cite{DOM} (Document Object Model)  pode ser facilmente manipulado já que ele usa usa os padrões da web como HTML \cite{HTML}, CSS \cite{CSS}, SVG para renderizar gráficos de visualização poderosos.

\begin{figure}[ht]
  	\center
    \includegraphics[width=0.7\textwidth]{images/exemplo-graf-d3.png}
    \caption{Exemplo de um gráfico desenvolvido com D3.js}
\end{figure} 

}

{\textbf{Construção de gráficos com D3.js:}

No \textit{e-commerce} foi decidido não construir o gráfico inteiramente com D3.js, pois a abordagem normal presente não facilitaria o reaproveitamento para a criação dos componentes. Quando um gráfico é plotado somente com D3.js pode haver problemas de performance, visto que o React não estava preparado para esse tipo de renderização contínua criada ao se aplicar filtros e interações nos gráficos. Dessa forma, a abordagem mais coerente era usar as tags HTML normais e quando era necessário feito a criação do elementos e interações usando o D3.js.

Para manipularmos o DOM (Document Object Model), precisamos aprender a utilizar os recursos presente no D3. O D3 usa JavaScript para realizar a maioria das tarefas de seleção, transição e vinculação de dados.

A primeira coisa necessária para construir um gráfico com D3.js é adicionar a biblioteca ao projeto, seja por gerenciador de pacotes ou por importação direta na tag \lstinline{script}. Feito isso, é preciso ter uma tag como base onde as partes do gráfico serão injetadas, geralmente é usada a tag \lstinline{svg} pois ela auxilia na construção de formas geométricas que será utilizado no gráfico. Após adicionar a tag svg precisamos adicionar uma nova tag \lstinline{g} para que o gráfico comece a tomar forma, essa tag \lstinline{g} é um recipiente utilizado para agrupar objetos.

Para começar a desenhar qualquer tipo de gráfico é necessário colocar os eixos das abscissas e ordenadas, para isso que definir quais são os domínios e só assim construir as escalas, para que seja comportado todos os dados dentro dos limites criados pela escala. O próprio D3 já fornece alguns tipos de funções que nos auxiliam na criação dessas escalas, as funções são: \lstinline{d3.scaleBand()}, onde esta função divide o intervalo em n bandas onde n é o número de valores na matriz de domínio e \lstinline{d3.scaleLinear}, que é usada para criar um ponto de escala visual. Será criado duas escalas, uma para o eixo X usando a \lstinline{d3.scaleBand()} e outra para o eixo Y usando a \lstinline{d3.scaleLinear}.

O próximo passo é criar por fim o conteúdo do gráfico de forma visual. Com o apoio de dados vindos de uma API podemos atribuir ao longo do eixo X e do eixo Y os valores e formas visuais necessárias. Utilizando a função \lstinline{attr} será possível definir os atributos do elemento, uma vez que essa função recebe dois parâmetros o nome do atributo e o valor desse atributo. Graças a essa função podemos definir altura, largura e os valores de cada ponto dos eixos.

Depois que todos os valores dos gráficos estiverem corretamente plotados podemos lidar com as interações que estarão no gráfico. Todas as interações presentes via mouse devem também estarem disponíveis via teclado, ou seja, se houver um interação de clique de mouse deve haver uma interação de pressão de tecla. Para auxiliar na construção dessas interações pode-se usar a função \lstinline{.on()} que ficará responsável por agir como um \textit{event listener} de um elemento, onde qualquer tipo de interação será percebida. Essa função recebe dois argumentos, sendo o primeiro o tipo de evento e o segundo uma função que será disparava quando essa evento for ouvido. 


\textbf{Tornando os gráficos acessíveis a leitores de tela}

{Além de tornar os gráficos acessíveis a qualquer tipo de navegação e interação é preciso que as imagens e os elementos presentes também estejam acessíveis e para isso temos algumas abordagens eficientes:
\begin{itemize}
    \item Adicionar o atributo \lstinline{alt}: Os leitores de tela falam texto alternativo sem permitir que os usuários acelerem ou pulem, portanto, as informações sejam descritivas, mas sucintas.
    \item Forneça os dados de algum outro modo que não somente por gráficos: Incluir um link para um CSV ou outro formato de dados legível por máquina para que pessoas com deficiência visual possam navegar pelos dados do gráfico com um leitor de tela é essencial.
    \item Adicionar um título claro em cada gráfico plotado: A primeira coisa que será lida em um gráfico é o seu título, isso facilitará a experiência dos usuário de leitor de tela, que ao perceber que aquele gráfico não é o que ele precisa ver no momento poderá pular a leitura ou modificar o filtro em questão.
    \item Rotular os dados diretamente: Legendas podem ser não eficientes para usuários daltônicos ou deficientes visuais que podem ter dificuldade em combinar as cores do gráfico com as da legenda. Rotulando também diminuirá o trabalho de varredura para frente e para trás tentando combinar a legenda com os dados.
    \item Verifique se o contraste de cores do gráfico está dentro dos padrões da WCAG.
    \item Utilizar espaços em branco para separar gráficos que são empilhados. O uso criterioso do espaço em branco aumenta a legibilidade, ajudando a demarcar e distinguir as diferentes seções sem depender apenas da cor. Isso também pode complementar as opções de cores acessíveis, ajudando os usuários a distinguir a diferença entre as cores que identificam seções separadas.
    \item Adicionar explicações ou conclusões em linguagem clara: Ao aplicar determinados filtros apresente algum tipo de conclusão do gráfico plotado. Esse recurso só deve tá disponível quando a navegação por tab for identificada. 
\end{itemize}


\textbf{Gráficos como componentes reutilizáveis}

{Quando se trabalha com React \cite{REACT} ao se criar um componente devemos garantir que esse componente possa ser reutilizável, para que isso seja possível no momento da criação de cada componente deve-se ter em mente que quando menor e mais genérico for o componente mais ele será escalável e com isso facilitará a construção de componentes maiores.

Para facilitar a construção como módulos separados cada tipo de gráfico se tornou um componente reutilizável. Em cada componente desses contaria com suas funções e particularidades porém com a flexibilidade de ser um componente genérico, onde todos os dados são populados através de propriedades que são repassadas do componente pai para o componente filho. 

\lstdefinelanguage{JavaScript}{
  morekeywords=[1]{break, continue, delete, else, for, function, if, in,
    new, return, this, typeof, var, void, while, with},
  % Literals, primitive types, and reference types.
  morekeywords=[2]{false, null, true, boolean, number, undefined,
    Array, Boolean, Date, Math, Number, String, Object},
  % Built-ins.
  morekeywords=[3]{eval, parseInt, parseFloat, escape, unescape},
  sensitive,
  morecomment=[s]{/*}{*/},
  morecomment=[l]//,
  morecomment=[s]{/**}{*/}, % JavaDoc style comments
  morestring=[b]',
  morestring=[b]"
}[keywords, comments, strings]

{\begin{lstlisting}[language=javascript,caption=exemplo de um componente de gráfico]
const draw = (props) => {
    d3.select('.vis-barchart > *').remove();
    const data = props.data;
    const margin = {top: 20, right: 20, bottom: 30, left: 40};
    const width = props.width - margin.left - margin.right;
    const height = props.height - margin.top - margin.bottom;
    
    // criando o svg
    let svg = d3.select('.vis-barchart').append('svg')
        .attr('width',width + margin.left + margin.right)
        .attr('height',height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    // formatando os dados
    data.forEach(function(d) {
        d.age = +d.age;
    });

    // Dimensionar o intervalo dos dados nos domínios
    let x = d3.scaleBand()
      .range([0, width])
      .padding(0.1);
    let y = d3.scaleLinear()
      .range([height, 0]);
    x.domain(data.map(function(d) { return d.name; }));
    y.domain([0, d3.max(data, function(d) { return d.age; })]);

    // Adicionando os retângulos para o gráfico de barras
    svg.selectAll(".bar")
        .data(data)
        .enter().append("rect")
        .attr("class", "bar")
        .attr("x", function(d) { return x(d.name); })
        .attr("width", x.bandwidth())
        .attr("y", function(d) { return y(d.age); })
        .attr("height", function(d) { return height - y(d.age); });

    // Adicionando o eixo X
    svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

    // Adicionando o eixo Y
    svg.append("g")
        .call(d3.axisLeft(y));
}

export default draw;
\end{lstlisting}}

}

}

Para usar esse componente basta chamá-lo passando as \lstinline{props} que são necessárias para a plotagem do gráfico.
\begin{lstlisting}[language=javascript, caption=Usando um componente reutilizável]
<BarChart data={data} width={1000} height={550}/>
\end{lstlisting}

}
\subsection{Fase 4: Testes e avaliações de acessibilidade}
{Durante e após a construção do e-commerce de acordo com os
padrões Web e as diretrizes de acessibilidade, é necessário efetuar testes para garantir sua acessibilidade. Esses testes foram executados de dois modos: 
\begin{itemize}
\item Avaliação automática: São as avaliações feitas de maneira automática por meio de \textit{plugins} de verificação e de \textit{websites} de validação.
\begin{itemize}
\item \href{https://chrome.google.com/webstore/detail/accessibility-developer-t/fpkknkljclfencbdbgkenhalefipecmb?hl=pt-BR}{\textit{Google Accessibility Developer Tools}} ({Plugins} para navegador \textit{Chrome}).
\item \href{https://developer.chrome.com/docs/devtools/}{\textit{DevTools}}({Plugins} para navegador \textit{Chrome}).
\item \href{https://contrastchecker.com/}{Contrast Checker} (website - Validação de contraste de cores)
\end{itemize}
\item Avaliações manuais: Essa etapa foi usando o leitor de tela e a navegação por teclado, onde deve ser checado se todos os comportamentos e ações esperados estão sendo realmente respeitados e executados.
\end{itemize}
}

\subsection{Tecnologias utilizadas} 
{A linguagem de programação JavaScript foi escolhida para a elaboração deste trabalho devido a sua grande relevância no frontend. Entre as principais bibliotecas utilizadas neste projeto destaca-se:
\begin{itemize}
\item \textit{HTML \href{https://developer.mozilla.org/pt-BR/docs/Web/HTML}{HTML}: é uma linguagem de marcação utilizada na construção de páginas na \textit{Web}}.
\item Diretrizes \textit{\href{https://www.w3c.br/traducoes/wcag/wcag21-pt-BR/}{WCAG}: é um conjunto de regras que definem a forma de como tornar o conteúdo da \textit{Web} mais acessível para pessoas com deficiência}.
\item \textit{Atributos \href{https://www.w3.org/TR/wai-aria-1.2/}{WAI-ARIA}: Especificações técnicas que oferecem maneiras de tornar as aplicações mais acessíveis a uma diversidade maior de pessoas, incluindo quem utiliza tecnologias assistivas, como leitores de telas}.
\item { \href{https://pt-br.reactjs.org/}{React.js}: É uma biblioteca \textit{JavaScript} para criar interfaces de usuário, ela é declarativa e baseada em componentes}.
\item {\href{https://sass-lang.com/}{Sass}: Ou \textit{Syntactically Awesome Style Sheets} é uma linguagem de extensão do \textit{CSS} e tem como objetivo tornar o processo de desenvolvimento mais simples e eficiente}.
\item {\href{https://d3js.org/}{D3.js} : Trata-se de uma biblioteca {JavaScript} para construção de visualizações de dados. \textit{D3} permite que visualizações sejam criadas diretamente em páginas \textit{HTML} através de gráficos vetorizados \lstinline{SVG}}.
\item Tecnologias assistivas:
\begin{itemize}
\item \href{https://www.apple.com/br/accessibility/vision/}{VoiceOver}
\item \href{https://www.nvaccess.org/download/}{NVDA}
\item \href{https://help.gnome.org/users/orca/stable/index.html.pt_BR}{ORCA}
\end{itemize}
\end{itemize}
 }
\subsection{Contribuição}
{⁠A solução ainda não se encontra em ambiente de produção, pois está passando por um processo de alinhamento sobre outros pontos que o cliente deseja modificar dentro do sistema. Entretanto, todo esse épico de acessibilidade e DataViz já foi aprovado e muito bem avaliado pelo cliente que se mostrou muito feliz com o que foi apresentado.

O projeto, o guia construído e o conhecimento adquirido para a construção da solução se tornou um case para outros desenvolvedores e designers que buscam aprender mais sobre a acessibilidade e aplicá-la de um modo descomplicado e correto, sendo apresentado como case em reuniões de troca de conhecimentos entre pessoas desenvolvedoras e designers. 

}
